---
# tasks file for ansible_role_pull_dns_zones

- name: Initialize DNS block
  set_fact:
    dns_block: "{{ dns_block_start + '\n' }}"

- name: Include provider-specific fetch tasks
  include_tasks: "{{ fetch_task_file }}"
  vars:
    fetch_task_file: >-
      {% if dns_provider == 'cloudflare' %}
      {{ role_path }}/tasks/saas_cloudflare_fetch_zone.yml
      {% elif dns_provider == 'route53' %}
      {{ role_path }}/tasks/aws_route53_fetch_zone.yml
      {% else %}
      {{ role_path }}/tasks/saas_cloudflare_fetch_zone.yml
      {% endif %}


- name: Generate DNS block and update inventory
  include_tasks: generate_block.yml
